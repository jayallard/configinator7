@model ConfiginatorWeb.Interactors.Configuration.ConfigurationIndexResponse

@{
    ViewBag.Title = "title";
    Layout = "_Layout";
}
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>

<h2>Configuration Sections</h2>
<table class="table">
    @foreach (var i in Model.Sections)
    {
        <tr>
            <td>
                <a asp-action="Display" asp-route-sectionId="@i.SectionId">@i.Name</a>
                @* @if (i.DeployedIsOutOfDate) *@
                @* { *@
                @*     <span class="badge rounded-pill bg-warning">Out of Date</span> *@
                @* } *@

            </td>
            <td>@i.OrganizationPath</td>
        </tr>
    }
</table>

<a asp-action="Create">Add</a>
<br/><br/>
<h2>Variable Sets</h2>
@* TODO: create toggle for text vs diagram *@
@* <table class="table"> *@
@*     @foreach (var t in Model.VariableSets.OrderBy(kv => kv.VariableSetName)) *@
@*     { *@
@*         <tr> *@
@*             <td> *@
@*                 <a asp-controller="VariableSet" asp-action="Index" asp-route-variableSetName="@t.VariableSetName">@t.VariableSetName</a> *@
@*             </td> *@
@*         </tr> *@
@*     } *@
@* </table> *@

@foreach (var t in Model.VariableSets.Where(t => t.Mermaid != null).OrderBy(kv => kv.VariableSetName))
{
    <div class="mermaid">
        @t.Mermaid
    </div>
    <br/>
    <br/>
}


<h2>Global Schemas</h2>
<table class="table">
    @foreach (var t in Model.GlobalSchemas.OrderBy(kv => kv.Name))
    {
        <tr>
            <td>@t.Name</td>
            <td>@t.Description</td>
        </tr>
    }
</table>
<script>mermaid.initialize({ startOnLoad: true })</script>
